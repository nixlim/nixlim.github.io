<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Plan-Spec: Teaching Agents to Think Before They Code | Foundry of Zero</title><meta name=description content="Ask an AI agent to plan a feature and you'll get a brain dump with the structural integrity of a napkin sketch. Plan-Spec exists to turn that into something you'd actually build from."><meta property="og:title" content="Plan-Spec: Teaching Agents to Think Before They Code"><meta property="og:description" content="Ask an AI agent to plan a feature and you'll get a brain dump with the structural integrity of a napkin sketch. Plan-Spec exists to turn that into something you'd actually build from."><meta property="og:url" content="https://foundryofzero.ai/blog/plan-spec-teaching-agents-to-think-before-they-code/"><meta property="og:site_name" content="Foundry of Zero"><meta property="og:type" content="article"><meta property="og:image" content="https://foundryofzero.ai/images/og-default.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Plan-Spec: Teaching Agents to Think Before They Code"><meta name=twitter:description content="Ask an AI agent to plan a feature and you'll get a brain dump with the structural integrity of a napkin sketch. Plan-Spec exists to turn that into something you'd actually build from."><meta name=twitter:image content="https://foundryofzero.ai/images/og-default.png"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel=stylesheet><link rel=stylesheet href=/css/main.css><link rel=icon type=image/svg+xml href=/favicon.svg></head><body><nav class=site-nav role=navigation aria-label="Main navigation"><div class=nav-container><a href=/ class=nav-logo aria-label=Home>FoZ</a><ul class=nav-links><li><a href=/projects/>Projects</a></li><li><a href=/blog/>Blog</a></li><li><a href=/about/>About</a></li><li><a href=https://github.com/nixlim target=_blank rel="noopener noreferrer" class=nav-github aria-label=GitHub><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg></a></li></ul><button class=nav-hamburger aria-label="Toggle menu" aria-expanded=false aria-controls=mobile-menu>
<span class=hamburger-line></span>
<span class=hamburger-line></span>
<span class=hamburger-line></span></button></div><div class=mobile-menu id=mobile-menu aria-hidden=true><ul class=mobile-nav-links><li><a href=/projects/>Projects</a></li><li><a href=/blog/>Blog</a></li><li><a href=/about/>About</a></li><li><a href=https://github.com/nixlim target=_blank rel="noopener noreferrer" aria-label=GitHub>GitHub</a></li></ul></div></nav><main id=content><div class=container><article class=blog-post><h1>Plan-Spec: Teaching Agents to Think Before They Code</h1><div class=post-meta-row><time datetime=2026-02-04>February 4, 2026</time>
<span class=text-muted>&#183;</span>
<span class=text-muted>4 min read</span>
<span class=text-muted>&#183;</span>
<a href=/tags/plan-spec/ class=tag-pill>plan-spec</a>
<a href=/tags/architecture/ class=tag-pill>architecture</a>
<a href=/tags/vibe-coding/ class=tag-pill>vibe-coding</a>
<a href=/tags/agents/ class=tag-pill>agents</a>
<a href=/tags/bdd/ class=tag-pill>bdd</a>
<a href=/tags/tdd/ class=tag-pill>tdd</a></div><div class=content><img src=/images/plan-spec.png alt="Plan-Spec: structured specification pipeline for AI coding agents"><p>A good specification answers four questions: what are we building, how do we know it works, what happens when it doesn&rsquo;t, and where does each requirement trace to? Most AI-generated plans answer the first question enthusiastically and hand-wave the other three.</p><p>The problem isn&rsquo;t that the agent can&rsquo;t think. The problem is that nobody told it how to think <em>systematically</em>.</p><p>This matters because specifications are contracts. When an agent builds from a spec that says &ldquo;user can reset their password&rdquo; with no acceptance criteria, no boundary conditions, and no test plan, the agent fills the gaps itself.</p><p>So Opus and I built a skill that forces the thinking to happen before the first line of code exists.</p><h2 id=how-it-works>How it works</h2><p>Plan-Spec is a Claude Code skill &ndash; Markdown files in <code>.claude/skills/plan-spec/</code> that teach the agent a structured process for producing specifications. No runtime code. No dependencies. About 1,145 lines of carefully structured instructions across six files.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>/plan-spec <span style=color:#e6db74>&#34;Add OAuth2 support with Google and GitHub providers&#34;</span>
</span></span></code></pre></div><p>The agent walks through six phases, starting with discovery. It asks clarifying questions about actors, scope, constraints, and priority, summarises what it heard, and waits for confirmation. There is a hard gate:</p><blockquote><p><strong>GATE</strong>: Do NOT proceed past Phase 1 until the user explicitly confirms the captured requirements are correct.</p></blockquote><p>This is the phase that earns its keep. The gate prevents Claude from doing what LLMs love to do: autocomplete the entire spec without checking whether it&rsquo;s autocompleting in the right direction.</p><p>Once confirmed, the agent works through user stories with prioritised acceptance criteria, BDD scenarios in Given-When-Then format, a TDD plan with tests ordered by dependency, functional requirements using RFC-2119 language (MUST/SHOULD/MAY), and measurable success criteria. Everything gets assembled into a single Markdown file.</p><h2 id=traceability>Traceability</h2><p>Plan-Spec&rsquo;s central obsession is that every artefact links to the artefact above it and below it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-fallback data-lang=fallback><span style=display:flex><span>Functional Requirement → User Story → BDD Scenario → Test Name
</span></span><span style=display:flex><span>      FR-003           →   US-2     →  Scenario 2.3 → test_expired_token_rejected
</span></span></code></pre></div><p>Every BDD scenario carries a <code>Traces to:</code> line referencing its parent story. Every test maps back to a scenario. Before finishing, the agent runs a checklist: every user story has acceptance scenarios, every scenario has BDD coverage, every BDD scenario maps to a test, every functional requirement appears in the traceability matrix, and every success criterion uses measurable language. &ldquo;Works correctly&rdquo; gets rejected. &ldquo;100% of expired tokens rejected&rdquo; does not.</p><h2 id=the-boundary-value-catalogue>The boundary value catalogue</h2><p>The skill includes a 201-line reference catalogue of boundary conditions organised by input type. Numeric: zero, min-1, max+1, <code>0.1 + 0.2</code>, NaN. Strings: empty, null, max+1, unicode combining characters, <code>&lt;script>alert(1)&lt;/script></code>, emoji. Dates: leap year February 29th, DST transitions, <code>9999-12-31</code>. Plus categories for concurrency, state corruption, network failures, and resource exhaustion.</p><p>The agent consults this for every feature. It doesn&rsquo;t need to remember that non-leap-year February 29th is a meaningful test case &ndash; it&rsquo;s in the catalogue.</p><h2 id=what-it-produces>What it produces</h2><p>A spec for a password reset feature comes out at 366 lines. Three user stories, eleven BDD scenarios, seventeen ordered tests, twenty-seven test data rows across three datasets, ten functional requirements, six success criteria with numeric thresholds, and a complete traceability matrix. The chain runs unbroken from &ldquo;why are we building this&rdquo; to &ldquo;how do we know it&rsquo;s done.&rdquo;</p><p>It&rsquo;s a skill, not a compiler &ndash; there&rsquo;s no deterministic guarantee that two runs produce identical output. But the structure is consistent, the traceability checks are systematic, and the output is miles ahead of &ldquo;here&rsquo;s a plan with some bullet points.&rdquo;</p><h2 id=how-it-fits-with-taskify>How it fits with Taskify</h2><p>Plan-Spec operates upstream of Taskify. Plan-Spec answers &ldquo;what should we build and how do we test it.&rdquo; Taskify answers &ldquo;is the task description well-formed enough for an agent to execute,&rdquo; and validates it deterministically against a JSON Schema. You&rsquo;d use Plan-Spec on Monday to think through the feature, then Taskify on Tuesday to break it into validated, tracked work items.</p><h2 id=the-meta-point>The meta-point</h2><p>Every specification problem is a thinking problem. The agent didn&rsquo;t produce a vague spec because it&rsquo;s incapable of precision &ndash; it produced a vague spec because you asked for a plan and a plan is whatever the agent thinks a plan looks like. Give it a structured process with mandatory traceability, boundary value catalogues, and an explicit gate between discovery and design, and it produces something you&rsquo;d actually build from.</p><p>The fix isn&rsquo;t a smarter model. The fix is a better process &ndash; and the process fits in six Markdown files.</p></div><a href=/blog/ class=back-link>&larr; Back to Blog</a></article></div></main><footer class=site-footer><div class=footer-container><p class=footer-tagline>Because why not?</p><p class=footer-copyright>&copy; 2026 Foundry of Zero.
<a href=https://github.com/nixlim target=_blank rel="noopener noreferrer">GitHub</a></p><p class=footer-credit>Vibe-coded with <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a>. Because why not.</p></div></footer><script src=/js/nav.js defer></script><script>document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll("code.language-mermaid");if(t.length===0)return;t.forEach(function(e){const n=e.parentElement,t=document.createElement("div");t.className="mermaid",t.textContent=e.textContent,n.parentElement.replaceChild(t,n)});const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js",e.onload=function(){mermaid.initialize({startOnLoad:!0,theme:"dark",themeVariables:{darkMode:!0,background:"#111111",primaryColor:"#1a3a1a",primaryTextColor:"#e0e0e0",primaryBorderColor:"#00ff41",secondaryColor:"#2a1a0a",secondaryTextColor:"#e0e0e0",secondaryBorderColor:"#b87333",tertiaryColor:"#1a1a1a",lineColor:"#00ff41",textColor:"#e0e0e0",mainBkg:"#1a3a1a",nodeBorder:"#00ff41",clusterBkg:"#111111",titleColor:"#00ff41",edgeLabelBackground:"#111111",nodeTextColor:"#e0e0e0"},flowchart:{htmlLabels:!0,curve:"basis"}}),mermaid.run()},document.head.appendChild(e)})</script></body></html>